```markdown
# JSONAware-Fuzzer: Coverage-Guided Fuzzing for Node.js IoT Applications

## Overview

**JSONAware-Fuzzer** is an extended JSFuzz-based framework for testing Node.js IoT applications. It provides:

- Instrumentation of application code to collect coverage.
- Generation of fuzzed inputs using a JSON-aware fuzzer.
- Execution of handler scripts that process incoming fuzzed data.
- Coverage reporting with HTML output for analysis.

---

## Directory Structure

```
JSONAware-Fuzzer/
├── corpus/ # Seed inputs for the fuzzer
├── instrumented/ # Instrumented JS code generated by the instrumentor
│ └── i_.js
├── fuzzers/ # Fuzzer scripts
│ └── newJsonAwareFuzz.js # Extended JSFuzz script
├── application_files/ # Application handler scripts triggered on data arrival
│ └── *.js
├── automateFindInstrumentor.js # Script to set up instrumentation
├── package.json # Node.js project configuration
└── README.md # This README file

````

---

## Prerequisites

- Node.js >= 14
- npm / npx
- PowerShell (Windows) for execution policy adjustments
- Optional: `nyc` for coverage reporting (`npm install --save-dev nyc`)

---

## Setup and Installation

1. Clone the repository:

```bash
git clone url.git
cd JSONAware-Fuzzer
````

2. Install dependencies:

```bash
npm install
```

3. On Windows, allow script execution:

```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force
```

---

## Workflow

### 1. Instrument application code

```bash
node automateFindInstrumentor.js
```

Prepares instrumented JS files for coverage tracking.

### 2. Run application handler scripts

```bash
node handlers/i_*.js
```

Handlers process incoming fuzzed inputs and execute tasks.

### 3. Run JSONAware-Fuzzer

```bash
jsonAwareFuzz fuzzers/newJsonAwareFuzz.js corpus
```

* `corpus` contains initial seed inputs.
* Generates new inputs, executes handlers, and tracks coverage.

### 4. Generate coverage report

```bash
npx nyc report --reporter=html
```

Produces `coverage/index.html` showing statement, branch, and function coverage.

---

## Notes

* Coverage-guided: prioritizes inputs that explore new code paths.
* For reproducible results, run multiple independent executions per application.
* Handlers simulate IoT events triggered by incoming fuzzed data.

---

## Example Usage

```bash
# Instrument application code
node automateFindInstrumentor.js

# Run handlers
node handlers/i_temperature.js

# Start fuzzing
jsonAwareFuzz fuzzers/newJsonAwareFuzz.js corpus

# Generate coverage report
npx nyc report --reporter=html
```
